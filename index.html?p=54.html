<!DOCTYPE html>

<html lang="en-US">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, initial-scale=1.0" />
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	<link rel="pingback" href="/xmlrpc.php" />

  <title>Get domain, path, protocol and get parameters in Django template | CodeCook.io | Blog</title>
<link rel="alternate" type="application/rss+xml" title="CodeCook.io | Blog &raquo; Feed" href="/feed/" />
<link rel="alternate" type="application/rss+xml" title="CodeCook.io | Blog &raquo; Comments Feed" href="/comments/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/blog.codecook.io\/wp-includes\/js\/wp-emoji-release.min.js"}};
			!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&&c.getContext("2d");return d&&d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56812,55356,56807),0,0),c.toDataURL().length>3e3):(d.fillText(String.fromCharCode(55357,56835),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='bootstrap-group-css' href='/wp-content/plugins/bwp-minify/cache/minify-b1-bootstrap-1acd2c3b132b8fad94dac2a62d588fde.css' type='text/css' media='screen' />
<!--[if lt IE 9]>
<link rel='stylesheet' id='html5-shiv-group-css' href='/wp-content/plugins/bwp-minify/cache/minify-b1-html5-shiv-7961b8871bb8775a9f10bcb33a1526e0.js' type='text/css' media='all' />
<![endif]-->
<!-- This site uses the Google Analytics by Yoast plugin v5.4.4 - Universal enabled - https://yoast.com/wordpress/plugins/google-analytics/ -->
<script type="text/javascript">
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','__gaTracker');

	__gaTracker('create', 'UA-53158891-2', 'auto');
	__gaTracker('set', 'forceSSL', true);
	__gaTracker('require', 'displayfeatures');
	__gaTracker('send','pageview');

</script>
<!-- / Google Analytics by Yoast -->
<script type='text/javascript' src='/wp-includes/js/jquery/jquery.js'></script>
<script type='text/javascript' src='/wp-includes/js/jquery/jquery-migrate.min.js'></script>
<script type='text/javascript' src='/wp-content/plugins/bwp-minify/cache/minify-b1-coeur_js-c7b5608b037ed6481b6fe32cb1e6c4a2.js'></script>
<link rel='prev' title='Static social share buttons' href='/2014/11/static-social-share-buttons/' />
<link rel='next' title='API update -&gt; parameters' href='/2014/12/api-update-parameters/' />
<link rel='canonical' href='/2014/11/get-domain-path-protocol-and-get-parameters-in-template/' />
<link rel='shortlink' href='/?p=54' />
<!-- FAVHERO FAVICON START --><link rel="apple-touch-icon-precomposed" href=/wp-content/uploads/2015/03/favicon-152.png><meta name="msapplication-TileColor" content="#FFFFFF"><meta name="msapplication-TileImage" content="/wp-content/uploads/2015/03/favicon-144.png"><!-- For iPhone with high-resolution Retina display running iOS â‰¥ 7: --><link rel="apple-touch-icon-precomposed" sizes="120x120" href="/wp-content/uploads/2015/03/favicon-120.png"><!-- For first- and second-generation iPad: --><link rel="apple-touch-icon-precomposed" sizes="72x72" href="/wp-content/uploads/2015/03/favicon-72.png"><!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: --><link rel="apple-touch-icon-precomposed" href="/wp-content/uploads/2015/03/favicon-57.png"><!-- FAVHERO FAVICON START -->      <!--Customizer CSS--> 
      <style type="text/css">
            
           .site-description { color:#555; } 
           body { background-color:#f9f9f9; } 
           a, a:hover { color:#00c9bf; }           .btn-primary, .bypostauthor .media-heading, .btn-primary:hover, .btn-primary:focus, .btn-primary:active, .btn-primary.active, .open .dropdown-toggle.btn-primary { background-color:#00c9bf; }           blockquote, .sticky, .form-control:focus, .search-field:focus, .btn-primary, .btn-primary:hover, .btn-primary:focus, .btn-primary:active, .btn-primary.active, .open .dropdown-toggle.btn-primary { border-color:#00c9bf; }           h1 a, .h1 a, h2 a, .h2 a, h3 a, .h3 a, h4 a, .h4 a, h5 a, .h5 a, h6 a, .h6 a { color:#333; }           h1 a, .h1 a, h2 a, .h2 a, h3 a, .h3 a, h4 a, .h4 a, h5 a, .h5 a, h6 a, .h6 a, h1, .h1, h2, .h2, h3, .h3, 
    h4, .h4, h5, .h5, h6, .h6, .site-description { font-weight:100; }           h1 a, .h1 a, h2 a, .h2 a, h3 a, .h3 a, h4 a, .h4 a, h5 a, .h5 a, h6 a, .h6 a, h1, .h1, h2, .h2, h3, .h3, 
    h4, .h4, h5, .h5, h6, .h6, .site-description { font-family:Helvetica Neue; }           body { font-family:Helvetica Neue; }           @media (min-width: 1200px) {
              .container { width:970px; }            }

                            .blog-header {
                    padding-top: 20px;
                    padding-bottom: 20px;
                    text-align: center;
                    background: #fff;
                }
            
                  </style> 
      <!--/Customizer CSS-->
        </head>

  <body class="single single-post postid-54 single-format-standard">
    <div class="wrap">

      <div class="blog-header" style="background:url('');background-size: cover;background-repeat: no-repeat;background-position: center;background-color:#FFF;">
                <div class='site-logo'>
          <a href='/' title='CodeCook.io | Blog' rel='home'><img src='/wp-content/uploads/2015/03/codecook_io_blog_logo1.png' alt='CodeCook.io | Blog'></a>
          <h1 class="blog-title"><a href="">CodeCook.io | Blog</a></h1>
        </div>
              <p class="site-description">Code templates in any language</p>
      </div>


  <nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <ul id="menu-menu-1" class="nav navbar-nav">
    <li class="home-link menu-item menu-item-type-post_type menu-item-object-page">
      <a id="search_toggle" href="#"><i class="fa fa-search"></i></a>
    </li>
    <div class="search-box">
      <form role="search" method="get" class="search-form" action="/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" title="Search for:" />
				</label>
				<input type="submit" class="search-submit" value="Search" />
			</form>    </div>
  </ul>
  <div id="bs-example-navbar-collapse-1" class="collapse navbar-collapse"><ul id="menu-custom-top-menu" class="nav navbar-nav"><li id="menu-item-27" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-27"><a title="Blog &lt;i class=&quot;fa fa-home&quot;&gt;&lt;/i&gt;" href="/"><span class="glyphicon blog.CodeCook.io"></span>&nbsp;Blog <i class="fa fa-home"></i></a></li>
<li id="menu-item-14" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-14"><a title="Code &lt;i class=&quot;fa fa-home&quot;&gt;&lt;/i&gt;" href="http://codecook.io"><span class="glyphicon CodeCook.io"></span>&nbsp;Code <i class="fa fa-home"></i></a></li>
</ul></div></div>
</nav>
<nav class="navbar navbar-default mobile-menu" role="navigation">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="mobile-search">
      <form role="search" method="get" class="search-form" action="/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" title="Search for:" />
				</label>
				<input type="submit" class="search-submit" value="Search" />
			</form>    </div>
    <div class="mobile-toggle navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#mobile-navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
  <div id="mobile-navbar-collapse" class="collapse navbar-collapse"><ul id="menu-custom-top-menu-1" class="nav navbar-nav"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-27"><a title="Blog &lt;i class=&quot;fa fa-home&quot;&gt;&lt;/i&gt;" href="/"><span class="glyphicon blog.CodeCook.io"></span>&nbsp;Blog <i class="fa fa-home"></i></a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-14"><a title="Code &lt;i class=&quot;fa fa-home&quot;&gt;&lt;/i&gt;" href="http://codecook.io"><span class="glyphicon CodeCook.io"></span>&nbsp;Code <i class="fa fa-home"></i></a></li>
</ul></div></div>
</nav>
<div class="container">
	<div class="row">

		<main class="col-md-9 col-sm-8 col-xs-12 blog" style="float:left">
			
			
			<article class="post-54 post type-post status-publish format-standard has-post-thumbnail hentry category-news tag-django tag-domain tag-path tag-url">
	<header>
		<h2 class="blog-post-title"><a href="/2014/11/get-domain-path-protocol-and-get-parameters-in-template/" rel="bookmark">Get domain, path, protocol and get parameters in Django template</a></h2>		<p class="blog-post-meta"><time class="post-meta-date">Posted on <a href="/2014/11/28/" title="Get domain, path, protocol and get parameters in Django template">November 28, 2014</a></time>  </p>

				        	<div class="post-thumbnail"><a href="/2014/11/get-domain-path-protocol-and-get-parameters-in-template/"><img width="438" height="270" src="/wp-content/uploads/2014/11/URL_parts_examine-438x270.png" class="attachment-post-thumbnail wp-post-image" alt="URL_parts_examine" /></a></div>
      			</header>
	<div class="post-content">
		<p>If you are a Django web developer you surely have found the need to use the sites domain name or absolute URL in a template. Django has a lot of functions and META keywords to do just that, but the features are spread out and lack a common interface. So, we have made a<a href="https://github.com/RRMoelker/django-full-url" target="_blank"> small tool/library</a> to simplify the process of getting what you need from the <a href="http://en.wikipedia.org/wiki/URI_scheme#Examples" target="_blank">complex URL/URI schema</a>.</p>
<h3>What the fuzz?</h3>
<p>So what exactly is the problem? Why would you need the full URL? And why not just always use relative paths, no domain needed?</p>
<p>Well first, say you want to share the current page on a social network. And you don&#8217;t want bloated prefab share buttons but use <a href="/2014/11/static-social-share-buttons/" title="Permalink to Static social share buttons" class="">static share buttons</a>. You will need to get the current URL in you template code to use in the share link. And not just the relative path, but the full URL,<br />
say: &#8220;http://example.com/news/2014/11/awesome-news/&#8221; instead of &#8220;/news/2014/11/awesome-news/&#8221;. Getting that URL is surprisingly poorly documented.</p>
<p>Or say you want to send your users and email with your brand image in the header. If you simple use &#8220;<code>{% static "my_app/myexample.jpg" %}</code>&#8221; you&#8217;ll end up with a broken image if the user views the email outside of your web page. Why, because in their web mail viewer or native app the domain name is unkown. Solution? Add the domain name in front of the image path.</p>
<p>So our <a href="https://github.com/RRMoelker/django-full-url" target="_blank">little library </a>should make it easy to get an URL in it&#8217;s entirety or just some parts of it. Say the user is looking at the URL: <code>http://localhost:8000/news/2014/?sort=ascending#item2<br />
</code></p>
<p>Using our library you can easily obtain the different parts such as:</p>
<ul class="task-list">
<li><strong>protocol</strong>: http://</li>
<li><strong>domain</strong>: localhost:8000</li>
<li><strong>port</strong>: 8000</li>
<li><strong>path</strong>: /news/2014/</li>
<li><strong>query</strong>: sort=ascending</li>
<li><strong>full_url</strong>: /news/2014/?sort=ascending</li>
<li><strong>absolute_uri</strong>: http://localhost:8000/news/2014/?sort=ascending</li>
</ul>
<p>To actually get these URL parts install the plugin and use either the context manager method or add the variables to the context yourself. For the rest of the text, we&#8217;ll assume you are using the context manager.</p>
<h2>Full URL</h2>
<p>If you want to share the current page you probably want to have access to the full URL in your template. If you want the protocol, domain and path <strong>without get parameters</strong> use:</p>
<pre><code>{{url_parts.protocol}}{{url_parts.domain}}{{url_path}}</code></pre>
<p>If you also want the <strong>get parameters</strong> you can use the simpler function:</p>
<pre><code>{{url_parts.absolute_uri}}</code></pre>
<p>Doing the latter is easy in Vanilla Django usingÂ  &#8220;build_absolute_uri&#8221;. The former requires you to add the domain and path after &#8220;http://&#8221; or &#8220;https://&#8221; depending whether the request is secured or not.</p>
<h3>(re)direct your users after login</h3>
<p>Note that if you want to use the current page to create a login button that redirects after authentication you will want to use the &#8220;full_url&#8221;. Your template code should look like:</p>
<pre><code>{% url "login" %}?next={{url_parts.full_url}}</code></pre>
<p>The default Django auth login view handles the redirect for you using the &#8220;next&#8221; get parameter.</p>
<h2>Domain or host name</h2>
<p>If you use a rendered template outside of your website you can&#8217;t just use relative paths. So you&#8217;ll need the domain name of the current site. The site framework does this for you, but it&#8217;s a hassle and prone to errors because configuration is stored in the database. To get the domain name in the template use:</p>
<pre><code>{{url_parts.domain}}</code></pre>
<p>Simple enough right? So if you for example use this to add an image in your outgoing emails, you&#8217;ll want to do:</p>
<pre><code>&lt;img src="http://{{url_parts.domain}}{% static "img/my-brand-logo.png" %}" alt="My brand logo" /&gt;
</code></pre>
<h2>Protocol, port, query</h2>
<p>Finally the infrequently required URL parts. In some rare cases you might want to extract some very specific information from the URL. You can obtain the protocol (&#8220;http://&#8221; or &#8220;https://&#8221;) by:</p>
<pre><code>{{url_parts.protocol}}</code></pre>
<p>The port can be extruded from the request is certain situations (not all) by:</p>
<pre><code>{{url_parts.port}}</code></pre>
<p>Finally you might just want to get the query part of the URL, you know, that part behind the &#8220;?&#8221; with the get parameters:</p>
<pre><code>{{url_parts.query}}</code></pre>
<h2>Convenient bits and pieces</h2>
<p>So, what we aimed to create was a <a href="https://github.com/RRMoelker/django-full-url" target="_blank">small tool</a> that makes using URL bits and pieces a bit more convenient than the Django way. We use it on <a href="http://codecook.io" target="_blank">our site</a> for static share links, login redirects and email images. We hope you will be able to use it as well. And please let us know if you would like a feature or found a bug.</p>
	</div>
			<p class="post-tags">Tags: <a href="/tag/django/" rel="tag">django</a>, <a href="/tag/domain/" rel="tag">domain</a>, <a href="/tag/path/" rel="tag">path</a>, <a href="/tag/url/" rel="tag">URL</a></p>
			</article>
			
			
		</main> <!-- blog-main -->

		<aside class="sidebar col-md-3 col-sm-4 col-xs-12" style="float:right">
			<aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" title="Search for:" />
				</label>
				<input type="submit" class="search-submit" value="Search" />
			</form></aside><aside id="text-6" class="widget widget_text"><h1 class="widget-title">Looking for code?</h1>			<div class="textwidget"><p>This is the <em>CodeCook blog</em>.</p>

<p>If you are looking for <b>actual code</b> visit 
<a href="http://codecook.io"> CodeCook.io</a></p></div>
		</aside>		<aside id="recent-posts-2" class="widget widget_recent_entries">		<h1 class="widget-title">Recent Posts</h1>		<ul>
					<li>
				<a href="/2015/10/setting-your-django-settings/">Setting your Django settings</a>
						</li>
					<li>
				<a href="/2014/12/api-update-parameters/">API update -> parameters</a>
						</li>
					<li>
				<a href="/2014/11/get-domain-path-protocol-and-get-parameters-in-template/">Get domain, path, protocol and get parameters in Django template</a>
						</li>
					<li>
				<a href="/2014/11/static-social-share-buttons/">Static social share buttons</a>
						</li>
					<li>
				<a href="/2014/11/the-results-are-in/">The results are in!</a>
						</li>
				</ul>
		</aside><aside id="archives-2" class="widget widget_archive"><h1 class="widget-title">Archives</h1>		<ul>
	<li><a href='/2015/10/'>October 2015</a></li>
	<li><a href='/2014/12/'>December 2014</a></li>
	<li><a href='/2014/11/'>November 2014</a></li>
		</ul>
</aside>		</aside><!-- /.blog-sidebar -->
	</div> <!-- row -->
</div> <!-- container -->

	<div class="footer-top">
		<div class="container">
			<div class="col-sm-4">
				<aside id="text-5" class="widget widget_text">			<div class="textwidget"></div>
		</aside>			</div>
			<div class="col-sm-4 md-footer-cl">
							</div>
			<div class="col-sm-4">
							</div>
		</div>
	</div>
<div class="blog-footer" style="border-top: 1px solid #ECECEC;background:#FFF;">
	<div class="container">
		<p>&copy; 2016 - <a href="http://codecook.io">Visit CodeCook.io</a></p>
		<p><a href="#"><i class="fa fa-angle-up"></i> Back to top<a></p>
	</div>
</div>
</div> <!-- wrap -->
<script type='text/javascript' src='/wp-content/plugins/bwp-minify/cache/minify-b1-coeur-fitvids-b7ffca4a0796981ea67778f88bbc98c4.js'></script>
</body>
</html>
<!-- Performance optimized by W3 Total Cache. Learn more: http://www.w3-edge.com/wordpress-plugins/

Page Caching using disk: enhanced
Database Caching using disk
Object Caching 883/1021 objects using disk

 Served from: blog.codecook.io @ 2016-10-13 18:56:02 by W3 Total Cache -->